# 심근경색 위험도 탐색기 (Streamlit Web App)

이 프로젝트는 Kaggle의 심장질환(심근경색/심장질환 발생) 데이터셋을 기반으로,  
사용자가 입력한 임상 특성으로 **예측 위험도 점수**를 계산하고, **변수 중요도/개인별 설명(SHAP)** 및 **발생군과의 근접도(2D 시각화)** 를 Plotly 기반 인터랙티브 그래프로 제공하는 Streamlit 웹앱입니다.

> 주의: 본 앱은 교육/연구 및 데이터 탐색 목적이며, 의료적 진단·치료 결정을 대체하지 않습니다.

---

## 참고한 데이터셋 (Kaggle)

- Heart Attack Data Analysis (Kaggle)  
  https://www.kaggle.com/datasets/nvarisha/heart-attack-data-analysis

---

## 주요 기능

1. **데이터 기본 탑재 및 로드**
   - CSV 파일을 repo에 포함하여 Streamlit Cloud에서 바로 실행됩니다.

2. **예측 위험도 점수(확률)**
   - 사용자가 입력한 특성값으로 타깃(발생=1) 확률을 계산하여 게이지로 표시합니다.
   - 전체 분포에서 내 위치(수직선)와 퍼센타일을 함께 제공합니다.

3. **변수 중요도(전역)**
   - Permutation Importance(ROC-AUC 감소량 기반)로 전역 중요도를 표시합니다.

4. **고위험군(발생군) 근접도 시각화**
   - 전처리된 특성 공간을 2D로 축소(SVD)한 지도 위에 전체 환자 분포와 사용자 위치를 표시합니다.
   - 발생군 중심(centroid)과의 거리 및 “발생군 근접도(0–100)”를 제공합니다.

5. **개인별 변수 기여도(SHAP)**
   - SHAP 값을 계산하고, Plotly 막대그래프로 개인 위험도에 기여한 요인(위험 증가/감소)을 직관적으로 보여줍니다.
   - 전역 SHAP 중요도(평균 절대 기여도)도 함께 제공합니다.

6. **한글 UI 및 코드값 의미 변환**
   - 변수명/설명은 한글로 표시됩니다.
   - 범주형 변수는 숫자 코드 대신 의미가 드러나는 한글 선택지로 보여줍니다(내부 입력은 원래 코드값 유지).

---

## 입력 시 주의 사항 (중요)

다음 항목은 일반인이 정확히 해석/입력하기 어려울 수 있습니다.

- ST 기울기(slope)
- 운동 후 ST 저하(oldpeak)
- 조영된 주요 혈관 수(ca)
- 휴식 심전도(restecg)
- Thal 검사(thal)

해당 값은 검사 결과/의무기록에 근거하여 입력하는 것이 바람직하며,  
불확실한 경우 **반드시 주치의와 상의 후 입력**하세요.

---

## 프로젝트 구조

아래 구조로 GitHub repo를 구성하면 Streamlit Cloud에서 바로 배포할 수 있습니다.

